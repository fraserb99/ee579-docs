<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Rules - EE579 Group 4 Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Rules";
    var mkdocs_page_input_path = "rules.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> EE579 Group 4 Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">For Developers</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../register-device/">Registering a Device</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mqtt/">Connecting to the broker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mqtt-schema/">Messaging Schema</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../webhooks/">Web Hooks</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">For Users</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../create-account/">Creating an Account</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../multi-tenancy/">Multi-Tenancy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../users/">Managing Users</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../devices/">Managing Devices</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Rules</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#creating-rules">Creating Rules</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#trigger">Trigger</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#input-types">Input Types</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#button-pushed">Button Pushed</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#switch-flipped">Switch Flipped</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#potentiometer">Potentiometer</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#temperature">Temperature</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#web-hooks">Web Hooks</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#outputs">Outputs</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#output-types">Output Types</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#buzzer-on">Buzzer - On</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#buzzer-beep">Buzzer - Beep</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#led-output">LED - Output</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#led-blink">LED - Blink</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#led-breathe">LED - Breathe</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#led-fade">LED - Fade</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#led-cycle">LED - Cycle</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">EE579 Group 4 Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>For Users &raquo;</li>
        
      
    
    <li>Rules</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="rules">Rules<a class="headerlink" href="#rules" title="Permanent link">#</a></h1>
<p>Rules are the core functionality of the system, allowing inputs from devices to trigger outputs.</p>
<h2 id="creating-rules">Creating Rules<a class="headerlink" href="#creating-rules" title="Permanent link">#</a></h2>
<p>Navigate to the rules page and press the add button to create a new rule. The rule form is shown below:</p>
<p><img alt="" src="../img/add-rule.png" /></p>
<p>The form is composed of 3 sections: Name, Trigger, and Outputs.</p>
<h2 id="trigger">Trigger<a class="headerlink" href="#trigger" title="Permanent link">#</a></h2>
<p>The Rule trigger is the device input that will trigger the rule and cause the outputs to be performed. This is composed of the input type and parameters desired, and the device or device group the input will come from. If a device group is chosen, an input matching the desired type and parameters from any of the groups devices will trigger the rule.</p>
<p>There are several input types that can be chosen:</p>
<h3 id="input-types">Input Types<a class="headerlink" href="#input-types" title="Permanent link">#</a></h3>
<h4 id="button-pushed">Button Pushed<a class="headerlink" href="#button-pushed" title="Permanent link">#</a></h4>
<p><img alt="" src="../img/button-pushed.png" /></p>
<p>This input is sent when the button is pushed on a device. The duration desired to trigger the rule can be set to one of three values:</p>
<ul>
<li><strong>Short Press</strong> - 0s &lt; 2s</li>
<li><strong>Medium Press</strong> - 2s &lt; 10s</li>
<li><strong>Long Press</strong> - &gt; 10s</li>
</ul>
<h4 id="switch-flipped">Switch Flipped<a class="headerlink" href="#switch-flipped" title="Permanent link">#</a></h4>
<p><img alt="" src="../img/switch-flipped.png" /></p>
<p>This input allows rules to be triggered when one of the 2 switches on the device are flipped. The peripheral (switch 1 or 2) can be chosen and the switch state. The switch state is used to specify whether the switch should be triggered when the switch is flipped to an on or off state.</p>
<h4 id="potentiometer">Potentiometer<a class="headerlink" href="#potentiometer" title="Permanent link">#</a></h4>
<p><img alt="" src="../img/potentiometer.png" /></p>
<p>This input allows you to specify a range of potentiometer values that will trigger the rule. The default configuration is a range between two values but this can also be inverted to allow for specifying a range of values less than the lower value <em>or</em> greater than the higher value. This can be done by pressing the button between the values, or manually setting the greater than value to be higher than the less than.</p>
<p><img alt="" src="../img/pot-inverted.png" /></p>
<p>When using a potentiometer value as an input it should be noted that the rule will not be triggered every time the potentiometer value changes if it is within the trigger range. Instead, the system keeps track of the last potentiometer value sent by the device and only triggers the rule if the last value was outwith the range and the new value is within it.</p>
<h4 id="temperature">Temperature<a class="headerlink" href="#temperature" title="Permanent link">#</a></h4>
<p><img alt="" src="../img/temperature.png" /></p>
<p>This input allows you to use the temperature sensor on your device as a trigger for the rule. It functions in a similar way to the potentiometer trigger, with a range picker. Again this range can be inverted, and the rule is only triggered when the last value did not satisfy the conditions.</p>
<h4 id="web-hooks">Web Hooks<a class="headerlink" href="#web-hooks" title="Permanent link">#</a></h4>
<p><img alt="" src="../img/webhies.png" /></p>
<p>This is an input that can be triggered via the invocation of a generated URL, commonly known as a web hook. It works similar to a physical input such as a button press, but instead of being triggered upon the button being pressed, the trigger happens upon invocation of the URL. After adding a rule with a web hook as an input, from the rules page on the website, find the added rule from which the invoke URL can be garnered. Below is an example of what this looks like. For more information for developers and using web hooks for interoperability please see <a href="../webhooks/">here</a>.</p>
<p><img alt="" src="../img/webhy2.png" /></p>
<h2 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Permanent link">#</a></h2>
<p>These are the outputs that will be performed when a rule is triggered. Multiple outputs can be performed for each rule.</p>
<h5 id="output-types">Output Types<a class="headerlink" href="#output-types" title="Permanent link">#</a></h5>
<h3 id="buzzer-on">Buzzer - On<a class="headerlink" href="#buzzer-on" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/buzzer-on.png" /></p>
<p>This output is used to sound a continuous buzzer tone for the specified duration.</p>
<h3 id="buzzer-beep">Buzzer - Beep<a class="headerlink" href="#buzzer-beep" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/buzzer-beep.png" /></p>
<p>This output beeps the buzzer with the duty cycle specified. The minimum values for the on and off duration are 200ms.</p>
<h3 id="led-output">LED - Output<a class="headerlink" href="#led-output" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/led-output.png" /></p>
<p>This output can be used to turn an LED on or off. There are 3 LEDs that can be selected, corresponding to the LEDs on the MSP430G2553. As such, LEDs 1 and 2 are single colour, but a colour - <em>Red, Green, Blue, Purple, Yellow, White</em> - can be chosen when LED 3 is selected.</p>
<p><img alt="" src="../img/led-colour.png" /></p>
<p>This choice of colour also applies to the other output types involving LED 3.</p>
<h3 id="led-blink">LED - Blink<a class="headerlink" href="#led-blink" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/led-blink.png" /></p>
<p>This output blinks the LED with the specified period.</p>
<h3 id="led-breathe">LED - Breathe<a class="headerlink" href="#led-breathe" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/led-breathe.png" /></p>
<p>This output makes the LED 'breathe' by smoothly changing the brightness from zero to full brightness and back again, and then repeats. The period of this breathing can be configured.</p>
<h3 id="led-fade">LED - Fade<a class="headerlink" href="#led-fade" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/led-fade.png" /></p>
<p>This output fades the LED off over a given period of time.</p>
<h3 id="led-cycle">LED - Cycle<a class="headerlink" href="#led-cycle" title="Permanent link">#</a></h3>
<p><img alt="" src="../img/led-cycle.png" /></p>
<p>This output applies only to LED 3 as it cycles through all possible colours. The direction of the cycle can be chosen along with the period - the total amount of time it will take to cycle through all colours</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../devices/" class="btn btn-neutral" title="Managing Devices"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../devices/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
